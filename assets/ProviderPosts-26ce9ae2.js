import{_ as T,L as B,E as D,T as V,I as A,u as L,D as j,f as z,G as N,r as d,w as M,q as $,s as w,o as s,c as l,b as e,y as F,v as y,x as G,F as f,a as p,n as S,t as P,i as k,h as C,X as U,p as W,k as q}from"./index-fec93108.js";const X={name:"ProviderPosts",components:{Loading:B,Error:D,Toast:V},setup(){const i=A(),g=L(),r=j(),o=z(),b=N(),x=d(!1),_=d(""),h=d("");let t=d(r.$state.portfolioPosts);M(()=>{t.value=r.$state.portfolioPosts}),$(()=>{t.value=r.$state.portfolioPosts});function c(a){return`data:image/jpeg;base64,${btoa(new Uint8Array(a).reduce((E,I)=>E+String.fromCharCode(I),""))}`}const n=d(null);function v(a){n.value=a}return{userStore:i,providerStore:g,wilayasStore:o,authStore:b,portfolioStore:r,portfolioPosts:t,errorStatus:x,errorMessage:_,errorColor:h,selectedPost:n,getBase64Image:c,setSelectedPost:v,handleSendPostDelete:a=>{r.$state.postToDelete=a,console.log(a),console.log("post to delete now AVAIBLE")},handleSendPostEdit:a=>{r.$state.postToEdit=a,console.log("post to EDIT now AVAIBLE")}}}},u=i=>(W("data-v-4908bfcd"),i=i(),q(),i),H={class:"flex flex-col w-full"},J={key:1,class:"w-full h-full mb-20"},K={key:0,class:"flex flex-col justify-center items-center h-[50vh]"},O=u(()=>e("span",{class:"material-icons text-5xl text-gray-300"}," no_photography ",-1)),Q=u(()=>e("span",{class:"text-gray-300 text-lg font-semibold"},"No posts yet",-1)),R=[O,Q],Y={key:1,class:"griddy h-full"},Z={class:"w-full h-full flex flex-col justify-center items-center"},ee={class:"carousel carousel-center h-full max-h-[55vh] w-full"},te=["src","alt"],oe={key:0,class:"absolute w-fit p-1.5 bg-blue-500/30 rounded-full bottom-2 left-1/2 transform -translate-x-1/2 flex justify-center items-center"},se={class:"relative w-full px-2 flex flex-row gap-2 justify-between items-center"},le={class:"text-start text-lg font-medium"},ae={key:0,class:"dropdown dropdown-top dropdown-end"},re=u(()=>e("label",{tabindex:"0",class:"btn p-0 btn-circle btn-ghost -mx-1 cursor-pointer"},[e("span",{class:"material-icons text-3xl"}," more_horiz ")],-1)),ne={tabindex:"0",class:"dropdown-content font-semibold menu p-2 shadow bg-base-100 rounded-box w-52"},ie={class:"border-b-2"},ce=["onClick"],de=u(()=>e("span",{class:"material-icons text-error"},"delete",-1)),ue={class:""},fe=["onClick"],_e=u(()=>e("span",{class:"material-icons text-primary"},"edit",-1));function he(i,g,r,o,b,x){const _=w("Loading"),h=w("Toast");return s(),l(f,null,[e("div",H,[o.portfolioStore.loadingPortfolio?(s(),F(_,{key:0,class:"h-fit z-50"})):(s(),l("div",J,[o.portfolioPosts.length===0?(s(),l("div",K,R)):(s(),l("div",Y,[y(U,{name:"post",tag:"div",mode:"out-in"},{default:G(()=>[e("div",Z,[(s(!0),l(f,null,p(o.portfolioPosts.portfolioPostsWithImages,t=>(s(),l("div",{key:t.id,class:"relative h-fit mb-4 w-full flex flex-col md:max-w-xl self-center group bg-gray-100 border rounded-xl drop-shadow-md transition"},[e("div",ee,[(s(!0),l(f,null,p(t.images,(c,n)=>(s(),l("div",{key:n,class:"relative carousel-item h-full w-full border border-white"},[e("img",{class:"h-full rounded-t-xl w-full object-cover",src:o.getBase64Image(c.data),alt:c.type},null,8,te),e("label",{class:S(["material-icons z-10 text-3xl absolute top-1 right-1 bg-white/50 w-fit h-fit rounded-full px-0.5",{"text-warning":t.status==="pending","text-success":t.status!="pending"}])},P(t.status==="pending"?"published_with_changes":"verified"),3),t.images.length>1?(s(),l("div",oe,[(s(!0),l(f,null,p(t.images,(v,m)=>(s(),l("div",{key:n,class:S(["w-2 h-2 rounded-full mx-1 cursor-pointer",{"bg-blue-500 notification-item ":n===m,"bg-gray-100":n!=m}])},null,2))),128))])):k("",!0)]))),128))]),e("div",se,[e("p",le,P(t.details),1),o.authStore.$state.userAuth.id===o.providerStore.$state.provider.id?(s(),l("div",ae,[re,e("ul",ne,[e("li",ie,[e("label",{onClick:c=>o.handleSendPostDelete(t),for:"delete-post-modal"},[de,C(" Delete ")],8,ce)]),e("li",ue,[e("label",{onClick:c=>o.handleSendPostEdit(t),for:"edit-post-modal"},[_e,C(" Edit ")],8,fe)])])])):k("",!0)])]))),128))])]),_:1})]))]))]),y(h,{duration:5e3,class:"bottom-0 z-50",color:o.errorColor,isVisible:o.errorStatus,message:o.errorMessage},null,8,["color","isVisible","message"])],64)}const be=T(X,[["render",he],["__scopeId","data-v-4908bfcd"]]);export{be as P};
