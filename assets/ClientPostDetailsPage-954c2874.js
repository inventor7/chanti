import{_ as P,o as t,c as o,b as s,a3 as j,E as B,L as R,a4 as q,A as N,g as V,e as L,J as T,d as W,G as z,f as A,K as E,m as p,s as y,y as g,x as F,i as r,t as i,n as b,h as G,F as w,a as x,v as d,Q as J,j as K}from"./index-fec93108.js";const Q={},U={class:"w-fit h-fit provider-card-squeleton"},H=s("div",{class:"provider-card-squeleton__header"},[s("div",{class:"provider-card-squeleton__header__avatar"}),s("div",{class:"provider-card-squeleton__header__name"})],-1),M=s("div",{class:"provider-card-squelet on__body"},null,-1),O=[H,M];function X(e,l){return t(),o("div",U,O)}const Y=P(Q,[["render",X]]);const Z=j({name:"ClientPostDetailsPage",components:{Error:B,Loading:R,ProviderCard:q,Alert:N,ProviderCardSqueleton:Y},setup(){const e=V(),l=L();T();const m=W();z();const h=A(),f=E(),{timeDifference:_}=K(),u=c=>_(c),a=()=>{e.clientPostPageVisibility=!1,e.selectedPost.images=[]},n=c=>{c==="delete"?e.PostToDelte=v.value:(e.clientPostPageVisibility=!1,e.RatingPageVisibility=!0)};let v=p(()=>e.$state.selectedPost),S=p(()=>e.$state.selectedPost.images?e.$state.selectedPost.images:[]),I=p(()=>e.$state.selectedPost.providersSentResponse),C=p(()=>e.$state.selectedPost.providersSentInterest);function k(c){return`data:image/jpeg;base64,${btoa(new Uint8Array(c).reduce((D,$)=>D+String.fromCharCode($),""))}`}return{clientDemandeStore:e,languageStore:l,categoriesStore:m,wilayasStore:h,router:f,post:v,postImages:S,handleClosePostPage:a,formatTime:u,handleWorkStatus:n,getBase64Image:k,providersSentResponse:I,providersInterest:C}}}),ee={key:0,class:"bg-white right-0 top-0 w-screen md:w-1/2 shadow-2xl overflow-y-scroll h-screen z-[80] fixed"},se={class:"flex fixed px-2 shadow-xl w-screen md:w-1/2 rounded-b-xl bg-white h-16 z-10 top-0 flex-row justify-between items-center"},te=s("span",{class:"material-icons text-primary font-bold md:text-2xl text-lg"}," arrow_back_ios ",-1),oe=[te],re=s("span",{class:"text-2xl font-bold text-primary"},"#23",-1),ne=s("button",{class:"btn-circle opacity-0"},[s("span",{class:"material-icons text-primary font-bold md:text-2xl text-lg"}," arrow_forward_ios ")],-1),le={class:"flex flex-col pb-16 overflow-y-scroll px-2 pt-20 font-semibold w-full h-full"},ae={key:0,class:"w-full h-full flex flex-col items-center justify-center"},ie=s("div",{class:"w-full h-[40vh] bg-gray-100 rounded-t-xl flex flex-col items-center justify-center"},[s("div",{class:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary"})],-1),de=[ie],ce={key:1,class:"w-full h-[40vh] flex flex-col items-center justify-center"},ue=s("span",{class:"material-icons text-9xl text-gray-300"},"image",-1),pe=s("p",{class:"text-gray-300 text-xl"},"No images ",-1),ge=[ue,pe],me={key:2,class:"w-full h-full"},he={key:0,class:"grid grid-cols-12 gap-1 grid-rows-1 w-full max-h-[40vh]"},fe=["src"],_e={class:"w-full col-span-6 gap-1 h-full overflow-hidden flex flex-col"},ve=["src"],ye=["src"],be={key:1,class:"grid grid-cols-12 gap-1 grid-rows-1 w-full max-h-[40vh]"},we=["src"],xe=["src"],Pe=["src"],Se={class:"pt-1 mb-6 rounded-b-lg border-2"},Ie={class:"font-bold pt-2 pl-1 mb-1 text-xl"},Ce={class:"w-full h-fit bg-gray-300/30 rounded-lg px-2 pt-3"},ke={class:"text-xs text-gray-500 mb-2"},De={class:"flex flex-row justify-between items-center w-full"},$e={class:"text-sm"},je={class:"text-xs flex items-center text-gray-400 mr-2"},Be=s("span",{class:"material-icons text-center text-sm text-primary"}," location_on ",-1),Re={class:"text-xs text-gray-400"},qe={class:"pl-1 pb-2 mt-4"},Ne=s("h3",{class:"font-semibold text-secondary rounded-t-xl bg-secondary/10 w-fit px-2 py-0.5"},"Providers Responsed",-1),Ve={class:"border-secondary p-1 bg-secondary/10 rounded-b-xl rounded-tr-xl"},Le={key:0,class:"flex flex-col items-center justify-center w-full min-h-[50vh]"},Te=s("span",{class:"material-icons text-secondary text-6xl"},"sentiment_dissatisfied",-1),We=s("p",{class:"text-secondary text-sm"},"No providers responsed yet",-1),ze=[Te,We],Ae={key:1,class:"w-full space-y-3 box"},Ee=s("h3",{class:"mt-8 font-semibold text-primary rounded-t-xl bg-primary/10 w-fit px-2 py-0.5"},"Providers Interested ",-1),Fe={class:"border-primary p-1 bg-primary/10 rounded-b-xl rounded-tr-xl"},Ge={key:0,class:"flex flex-col items-center justify-center w-full min-h-[50vh]"},Je=s("span",{class:"material-icons text-primary text-6xl"},"sentiment_dissatisfied",-1),Ke=s("p",{class:"text-primary text-sm"},"No providers interested yet",-1),Qe=[Je,Ke],Ue={key:1,class:"w-full space-y-3 box"},He={key:3,class:"w-full h-fit box"},Me={key:0,class:"w-full md:w-[50vw] fixed flex flex-col items-center justify-center right-0 z-50 bottom-0 px-2 py-2 bg-white"},Oe={class:"grid grid-rows-1 grid-cols-12 bg-transparent w-full"},Xe=s("div",{class:"divider col-span-2 mx-0 divider-horizontal"},null,-1),Ye=["disabled"];function Ze(e,l,m,h,f,_){const u=y("ProviderCard"),a=y("ProviderCardSqueleton");return t(),g(J,{name:"slideRight"},{default:F(()=>[e.clientDemandeStore.clientPostPageVisibility?(t(),o("div",ee,[s("div",se,[s("button",{class:"btn-circle",onClick:l[0]||(l[0]=(...n)=>e.handleClosePostPage&&e.handleClosePostPage(...n))},oe),re,ne]),s("div",le,[e.clientDemandeStore.loadingPostImage?(t(),o("div",ae,de)):r("",!0),e.postImages.length===0&&!e.clientDemandeStore.loadingPostImage?(t(),o("div",ce,ge)):r("",!0),e.postImages.length!=0||!e.clientDemandeStore.loadingPostImage?(t(),o("div",me,[e.postImages.length===3?(t(),o("div",he,[s("img",{class:"object-cover h-full w-full max-h-[40vh] rounded-tl-xl col-span-6",src:e.getBase64Image(e.postImages[0].data)},null,8,fe),s("div",_e,[s("img",{class:"object-cover h-full max-h-[20vh] rounded-tr-xl rounded",src:e.getBase64Image(e.postImages[1].data)},null,8,ve),s("img",{class:"object-cover h-full max-h-[20vh]",src:e.getBase64Image(e.postImages[2].data)},null,8,ye)])])):r("",!0),e.postImages.length===2?(t(),o("div",be,[s("img",{class:"object-cover w-full h-[40vh] rounded-tl-xl col-span-6",src:e.getBase64Image(e.postImages[0].data)},null,8,we),s("img",{class:"object-cover w-full h-[40vh] rounded-tr-xl col-span-6",src:e.getBase64Image(e.postImages[1].data)},null,8,xe)])):r("",!0),e.postImages.length===1?(t(),o("img",{key:2,class:"object-cover h-full w-full max-h-[40vh] rounded-tl-xl col-span-6",src:e.getBase64Image(e.postImages[0].data)},null,8,Pe)):r("",!0)])):r("",!0),s("div",Se,[s("h2",Ie,i(e.languageStore.getWord(e.categoriesStore.getCategoryById(e.post.categoryId))),1),s("div",Ce,[s("p",ke,i(e.post.id),1),s("div",De,[s("div",{class:b(["flex px-2 rounded-full flex-row gap-1 items-center self-start",{"text-red-500 bg-red-500/20":e.post.urgency==="urgent","text-yellow-500 bg-yellow-500/20":e.post.urgency==="normal","text-green-500 bg-green-500/20":e.post.urgency==="low","text-blue-500 bg-blue-500/20":e.post.urgency==="unplanned"}])},[s("span",{class:b(["material-icons text-sm",{"text-red-500":e.post.urgency==="urgent","text-yellow-500":e.post.urgency==="normal","text-green-500":e.post.urgency==="low","text-blue-500":e.post.urgency==="unplanned"}])},i(e.post.urgency==="urgent"?"hourglass_full":e.post.urgency==="low"?"hourglass_empty":e.post.urgency==="normal"?"hourglass_bottom":"hourglass_disabled"),3),s("span",$e,i(e.post.urgency),1)],2),s("p",je,[Be,G(" "+i(e.wilayasStore.getWilayaById(e.post.stateId)),1)]),s("p",Re,i(e.formatTime(e.post.createdAt)),1)]),s("p",qe,i(e.post.description),1)])]),Ne,s("div",Ve,[e.providersSentResponse&&e.providersSentResponse.length===0?(t(),o("div",Le,ze)):r("",!0),e.clientDemandeStore.loadingClientDemande?r("",!0):(t(),o("div",Ae,[(t(!0),o(w,null,x(e.providersSentResponse,n=>(t(),g(u,{key:n.id,provider:n,type:"responsed",componentLocation:"ClientPostDetailsPage"},null,8,["provider"]))),128))]))]),Ee,s("div",Fe,[e.providersInterest&&e.providersInterest.length===0?(t(),o("div",Ge,Qe)):r("",!0),e.clientDemandeStore.loadingClientDemande?r("",!0):(t(),o("div",Ue,[(t(!0),o(w,null,x(e.providersInterest,n=>(t(),g(u,{key:n.id,provider:n,type:"interested",componentLocation:"ClientPostDetailsPage"},null,8,["provider"]))),128))]))]),e.clientDemandeStore.loadingClientDemande?(t(),o("div",He,[d(a),d(a),d(a),d(a),d(a),d(a)])):r("",!0)]),e.post.status==="pending"?(t(),o("div",Me,[s("div",Oe,[s("label",{for:"delete-modal",onClick:l[1]||(l[1]=n=>e.handleWorkStatus("delete")),class:"btn btn-sm text-error btn-ghost hover:bg-error hover:text-white col-span-5 w-full px-0"}," supprimer "),Xe,s("button",{disabled:e.providersSentResponse&&e.providersSentResponse.length===0&&e.providersInterest&&e.providersInterest.length===0,onClick:l[2]||(l[2]=n=>e.handleWorkStatus("done")),class:"btn btn-sm whitespace-nowrap text-success hover:bg-success hover:text-white col-span-5 btn-ghost w-full px-0"}," marque faite ",8,Ye)])])):r("",!0)])):r("",!0)]),_:1})}const ts=P(Z,[["render",Ze]]);export{ts as default};
