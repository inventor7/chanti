import{P as I}from"./ProviderLayout-65b554ca.js";import{_ as S,L as j,E as B,T as E,I as D,u as k,D as W,f as H,H as M,e as A,d as G,V as q,G as F,r as g,W as R,N as U,s as m,o,c as a,b as t,y as b,i as c,x as C,F as w,a as X,t as l,n as P,h as Y,X as Z,v as L,Y as J,j as K,Z as O}from"./index-fec93108.js";const Q={name:"ProviderFeed",components:{Loading:j,Error:B,Toast:E},setup(){const d=D(),i=k();W();const u=H(),s=M(),y=A(),v=G(),r=q(),f=F(),x=g([]),e=g(!1),_=g(""),p=g(""),{timeDifference:V}=K(),N=n=>V(n),T=n=>{i.sendInterest(n).then(h=>{h.data.status==200?(p.value="error",e.value=!0,_.value=h.data.message):(p.value="success",e.value=!0,_.value=h.data.message+" the post will be added to your projects tab",r.feedPosts=r.$state.feedPosts.filter(z=>z.id!=n))})};return R(()=>r.$state.feedPosts,(n,h)=>{x.value=n},{deep:!0}),U(()=>{r.getFeedPosts().then(n=>{console.log("feed posts",n)})}),{userStore:d,providerStore:i,wilayasStore:u,categoriesStore:v,authStore:f,clientStore:s,languageStore:y,feedPostsStore:r,feedPosts:x,errorStatus:e,errorMessage:_,errorColor:p,sendInterest:T,formatTime:N}}},$={class:"flex flex-col w-full"},ee={key:2,class:"w-full min-h-[85vh]"},te={key:0,class:"flex flex-col justify-center items-center h-[80vh]"},se=t("span",{class:"material-icons text-5xl text-gray-300"}," no_photography ",-1),oe=t("span",{class:"text-gray-300 text-lg font-semibold"},"No posts yet",-1),re=[se,oe],ne=t("div",{class:"relative pt-[50%] sm:pt-[60%] lg:pt-[80%] rounded-t-xl overflow-hidden"},[t("img",{class:"notification-item w-full h-full absolute top-0 left-0 object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out rounded-t-xl",src:J,alt:"Image Description"})],-1),ae={class:"p-2 md:p-3 notification-item"},le={class:"flex flex-col gap-2"},ie={class:"flex flex-row justify-between items-center"},ce={class:"text-2xl font-semibold text-gray-800"},de={class:"inline-block text-[14px] bg-secondary/20 py-0.5 px-2 rounded-xl font-medium text-secondary"},ue=t("div",{class:"flex flex-row gap-2 self-start items-center"},[t("span",{class:"material-icons text-2xl text-primary"}," arrow_forward_ios ")],-1),fe={class:"flex mt-1 flex-row gap-1"},_e=t("span",{class:"material-icons text-primary text-lg"}," location_on ",-1),ge={class:"text-gray-500 text-sm self-center"},me={class:"flex flex-row pb-1 justify-between items-center"},xe={class:"flex pl-0.5 flex-row gap-1"},he=t("span",{class:"material-icons text-primary self-center text-lg"}," schedule ",-1),be={class:"text-gray-500 text-sm self-center"},ye={class:"py-0.5 w-full h-full"},ve={class:"w-full"},pe=["onClick"],we=["onClick"],Pe={key:2,class:"btn btn-sm md:btn-md z-20 bg-success/10 btn-primary w-full gap-2 cursor-not-allowed btn-disabled"},Se=t("span",{class:"material-icons text-success text-sm md:text-lg"}," check_circle ",-1),ke=t("span",{class:"text-sm md:text-lg font-bold text-success"},"Request sent",-1),Fe=[Se,ke];function Ce(d,i,u,s,y,v){const r=m("Loading"),f=m("Error"),x=m("Toast");return o(),a(w,null,[t("div",$,[s.feedPostsStore.loadingFeed&&!s.feedPostsStore.errorFeedPosts.status?(o(),b(r,{key:0,class:"fixed right-0 left-0 top-0 bottom-0 z-50"})):c("",!0),s.feedPostsStore.errorFeedPosts.status&&!s.feedPostsStore.loadingFeed?(o(),b(f,{key:1,class:"fixed right-0 left-0 top-0 bottom-0 z-50"})):c("",!0),!s.feedPostsStore.loadingFeed&&!s.feedPostsStore.errorFeedPosts.status?(o(),a("div",ee,[s.feedPosts===null||s.feedPosts.length===0?(o(),a("div",te,re)):(o(),b(Z,{key:1,name:"post",tag:"div",mode:"out-in"},{default:C(()=>[(o(!0),a(w,null,X(s.feedPosts,e=>(o(),a("div",{key:e.id,class:"post-container flex flex-col h-full w-full group mb-4 bg-white border-2 shadow-sm rounded-xl overflow-hidden hover:shadow-lg transition"},[ne,t("div",ae,[t("div",le,[t("div",ie,[t("div",null,[t("h3",ce,l(s.languageStore.getWord(e.subcategoryName)),1),t("label",de," #"+l(e.id.substring(0,5))+".. ",1)]),ue])]),t("div",fe,[_e,t("span",ge,l(s.wilayasStore.getWilayaById(e.stateId))+","+l(e.cityName),1)]),t("div",me,[t("div",xe,[he,t("span",be,l(s.formatTime(e.createdAt)),1)]),t("div",{class:P(["flex mt-1 px-2 rounded-full flex-row gap-1 items-center self-start",{"text-red-500 bg-red-500/20":e.urgency==="urgent","text-yellow-500 bg-yellow-500/20":e.urgency==="normal","text-green-500 bg-green-500/20":e.urgency==="low","text-blue-500 bg-blue-500/20":e.urgency==="unplanned"}])},[t("span",{class:P(["material-icons text-lg",{"text-red-500":e.urgency==="urgent","text-yellow-500":e.urgency==="normal","text-green-500":e.urgency==="low","text-blue-500":e.urgency==="unplanned"}])},l(e.urgency==="urgent"?"hourglass_full":e.urgency==="low"?"hourglass_empty":e.urgency==="normal"?"hourglass_bottom":"hourglass_disabled"),3),Y(" "+l(e.urgency),1)],2)]),t("div",ye,[t("div",ve,[e.btnVisible&&!e.btnLoading?(o(),a("button",{key:0,onClick:_=>s.sendInterest(e.id),class:"btn flex-1 font-bold w-full cursor-pointer z-20 gap-1 btn-sm sm:btn-md text-white btn-primary rounded-lg -white"}," demander ",8,pe)):c("",!0),!e.btnVisible&&e.btnLoading?(o(),a("button",{key:1,onClick:_=>s.sendInterest(e.id),class:"btn loading flex-1 font-bold w-full cursor-pointer z-20 gap-1 btn-sm sm:btn-md btn-outline btn-primary rounded-lg -white"}," loading ",8,we)):c("",!0),!e.btnVisible&&!e.btnLoading?(o(),a("button",Pe,Fe)):c("",!0)])])])]))),128))]),_:1}))])):c("",!0)]),L(x,{duration:5e3,class:"bottom-0 z-50",color:s.errorColor,isVisible:s.errorStatus,message:s.errorMessage},null,8,["color","isVisible","message"])],64)}const Le=S(Q,[["render",Ce]]),Ve={name:"ProviderHome",components:{NotificationPage:O,ProviderLayout:I,ProviderFeed:Le},setup(){const d=F(),i=k(),u=g(!1);return{authStore:d,providerStore:i,notSelectedError:u}}};function Ne(d,i,u,s,y,v){const r=m("ProviderFeed"),f=m("ProviderLayout");return o(),b(f,null,{default:C(()=>[L(r)]),_:1})}const Ie=S(Ve,[["render",Ne]]);export{Ie as default};
